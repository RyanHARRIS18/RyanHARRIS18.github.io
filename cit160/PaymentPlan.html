<!DOCTYPE HTML>
<html lang="en-us">
        <head>
            
         <meta charset="utf-8">
         
         <title>Chapter 9 assingments question 1</title>

         <script>

             //input: 5 input from user
                            //i = Principle
                            //r = rate (0.07)
                            //n = years
                            //p = periods per year
                            //d = payments made thus far

             //processing: use four functions to then implement the formulas
                    /*func do(a)[
                        vax y = compute(a) || call function

                        func compute(a)(prm1, prm2, prm3, prm4)
                        formula
                    ] 
                     /*func do(b)[
                        vax y = compute(b) || call function

                        (need to get answer! payment per period! from prior functions to put 
                        into this function)

                        func compute(b)(prm1, prm2, prm3, prm4, prm5)
                        formula
                    ] 
            //Output(s) Payment per Period & Remaining Balance
                    */
           

function doPayment() {
        var i = parseFloat(document.getElementById("i").value);
        var r = parseFloat(document.getElementById("r").value);
        var n = parseFloat(document.getElementById("n").value);
        var p = parseFloat(document.getElementById("p").value);

       var answer = computePayment(i, r, n, p) 
       var answer = (Math.round( answer * 100)) / 100 ;

       document.getElementById("amountPerPayment").innerHTML = "$" + answer;
}




function computePayment( principal, r, years, periods) {

            rate  = r / periods
            periodsPerYear = (years * periods) * -1 ;
            denom = ( 1 -  Math.pow( 1 + rate, periodsPerYear))
            Payments = ( principal * rate ) / denom
        return Payments
       }
    
 

function doBalance() {
        var i = parseFloat(document.getElementById("i").value);
        var r = parseFloat(document.getElementById("r").value);
        var n = parseFloat(document.getElementById("n").value);
        var p = parseFloat(document.getElementById("p").value);
        var d = parseFloat(document.getElementById("d").value);
       
        //must get the payments to put into balance func
        var ratePerPeriod  = r / p 
        var numofPeriods = (n * p) * -1 ;
        var  denom = ( 1 -  Math.pow( 1 + rate, numofPeriods))
        var payments = ( i * rate ) / denom
        var pp = (Math.round( payments * 100)) / 100 ;
       
       
       var answer = computeBalance(i, p, d, pp, ratePerPeriod) 
       var answer = (Math.round( answer * 100)) / 100 ;

       document.getElementById("Balance").innerHTML = "$" + answer;
}




function computeBalance( principal, paymentsPaid, PaymentPerPeriod, ratePerPeriod) {
            
            b = principal * Math.pow( 1 + ratePerPeriod , paymentsPaid )
            b = b - PaymentPerPeriod * ( ( ( 1 + ratePerPeriod , paymentsPaid) - 1) / d)
        return b
       }


 </script>
</head>

     

 <body>
    Amount borrowed (principal)<input type="text" id="i" size="5"><br>
    Annual intrest rate (example: .065)<input type="text" id="r" size="5"> <br>
   Number of Years<input type="text" id="n" size="5"><br>
   Payments per Year<input type="text" id="p" size="5"> <br> 
   
    <button type="button" onclick= "doPayment()">Compute payment</button><br>
    <div id="amountPerPayment"></div>
    
    Number of payments paid to date<input type="text" id="d" size="5"> <br>    

    <button type="button" onclick= "doBalance()"> Compute payoff amount</button><br>
    <div id="Balance"></div>
    
 </body>

</html>